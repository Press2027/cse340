<%- include("../partials/header") %>

<main class="account-view">
  <h1>Account Management</h1>

  <% if (accountData && accountData.account_firstname) { %>
    <!-- Greeting -->
    <h2>Welcome, <%= accountData.account_firstname %>!</h2>

    <!-- Update Account Link -->
    <p>
      <a href="/account/update/<%= accountData.account_id %>">
        Update Account Information
      </a>
    </p>

    <!-- Inventory Management for Employees/Admins -->
    <% if (accountData.account_type === "Employee" || accountData.account_type === "Admin") { %>
      <section>
        <h3>Inventory Management</h3>
        <p>
          <a href="/inv/">Manage Inventory</a>
        </p>
      </section>
    <% } %>

    <!-- Flash Messages -->
    <% if (notice) { %>
      <div class="notice">
        <% if (Array.isArray(notice)) { %>
          <% for (let i = 0; i < notice.length; i++) { %>
            <p><%= notice[i] %></p>
          <% } %>
        <% } else { %>
          <p><%= notice %></p>
        <% } %>
      </div>
    <% } %>

    <!-- Validation Errors -->
    <% if (errors && !errors.isEmpty()) { %>
      <div class="error">
        <% const errArray = errors.array(); %>
        <% for (let i = 0; i < errArray.length; i++) { %>
          <p><%= errArray[i].msg %></p>
        <% } %>
      </div>
    <% } %>

  <% } else { %>
    <p>Please log in to manage your account.</p>
  <% } %>
</main>

<%- include("../partials/footer") %>
